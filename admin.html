<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>积分管理后台 🛠️</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="css/style.css">
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            cutePink: '#ff9edf',
            cuteLightPink: '#ffeaf5',
            cuteBlue: '#9ee0ff',
            cuteYellow: '#fff39e',
            cuteBg: '#fffdf7'
          },
          fontFamily: {
            cute: ['Comic Sans MS', 'Microsoft YaHei', 'sans-serif']
          }
        }
      }
    }
  </script>
</head>
<body class="bg-cuteBg min-h-screen p-4 font-cute">
  <!-- 登录区域 -->
  <div id="loginBox" class="max-w-md mx-auto mt-10 bg-white rounded-2xl shadow-lg shadow-cutePink/20 p-6 border border-cuteLightPink">
    <h2 class="text-center text-xl font-bold text-cutePink mb-4 flex items-center justify-center gap-2">
      <i class="fas fa-lock"></i> 管理员登录
    </h2>
    <div class="mb-4">
      <label for="adminPwd" class="block text-gray-700 mb-2">管理员密码</label>
      <input type="password" id="adminPwd" class="w-full px-4 py-3 rounded-xl border border-cuteLightPink focus:outline-none focus:ring-2 focus:ring-cutePink/50">
    </div>
    <button id="loginBtn" class="w-full bg-cutePink text-white py-3 rounded-xl font-bold hover:bg-cutePink/80 transition-all">
      登录
    </button>
  </div>

  <!-- 后台操作区域（默认隐藏） -->
  <div id="adminBox" class="hidden max-w-4xl mx-auto mt-6">
    <!-- 顶部导航 -->
    <div class="bg-white rounded-2xl shadow-sm p-4 border border-cuteLightPink mb-6">
      <h2 class="text-xl font-bold text-cutePink flex items-center gap-2">
        <i class="fas fa-tachometer-alt"></i> 积分管理后台
      </h2>
      <p class="text-gray-500 text-sm mt-1">管理员操作请谨慎～</p>
    </div>

    <!-- 配置区：修改签到积分 -->
    <div class="bg-white rounded-2xl shadow-sm p-6 border border-cuteLightPink mb-6">
      <h3 class="font-bold text-gray-800 mb-4 flex items-center gap-2">
        <i class="fas fa-cog text-cuteBlue"></i> 基础配置
      </h3>
      <div class="flex flex-col sm:flex-row gap-3 items-center">
        <div class="flex-1">
          <label for="signScoreSet" class="block text-gray-700 mb-2">每日签到积分</label>
          <input type="number" id="signScoreSet" min="1" class="w-full px-4 py-3 rounded-xl border border-cuteLightPink focus:outline-none focus:ring-2 focus:ring-cutePink/50">
        </div>
        <button id="saveConfigBtn" class="sm:w-auto w-full bg-cutePink text-white py-3 px-6 rounded-xl font-bold hover:bg-cutePink/80 transition-all">
          保存配置
        </button>
      </div>
    </div>

    <!-- 单个用户操作 -->
    <div class="bg-white rounded-2xl shadow-sm p-6 border border-cuteLightPink mb-6">
      <h3 class="font-bold text-gray-800 mb-4 flex items-center gap-2">
        <i class="fas fa-user text-cuteYellow"></i> 单个用户操作
      </h3>
      <div class="grid grid-cols-1 sm:grid-cols-3 gap-3 mb-4">
        <input type="text" id="singleQq" placeholder="用户QQ号" class="px-4 py-3 rounded-xl border border-cuteLightPink focus:outline-none focus:ring-2 focus:ring-cutePink/50">
        <input type="number" id="singleScore" placeholder="积分值（正负均可）" class="px-4 py-3 rounded-xl border border-cuteLightPink focus:outline-none focus:ring-2 focus:ring-cutePink/50">
        <button id="singleOperBtn" class="bg-cutePink text-white py-3 rounded-xl font-bold hover:bg-cutePink/80 transition-all">
          执行操作
        </button>
      </div>
      <button id="checkRecordBtn" class="bg-cuteLightPink text-cutePink py-2 px-4 rounded-xl font-bold hover:bg-cuteLightPink/80 transition-all">
        查看该用户签到记录
      </button>
    </div>

    <!-- 全员操作 -->
    <div class="bg-white rounded-2xl shadow-sm p-6 border border-cuteLightPink mb-6">
      <h3 class="font-bold text-gray-800 mb-4 flex items-center gap-2">
        <i class="fas fa-users text-cutePink"></i> 全员积分操作
      </h3>
      <div class="flex flex-col sm:flex-row gap-3 items-center">
        <div class="flex-1">
          <label for="allScore" class="block text-gray-700 mb-2">全员积分值（正负均可）</label>
          <input type="number" id="allScore" placeholder="例如：10 或 -5" class="w-full px-4 py-3 rounded-xl border border-cuteLightPink focus:outline-none focus:ring-2 focus:ring-cutePink/50">
        </div>
        <button id="allOperBtn" class="sm:w-auto w-full bg-cutePink text-white py-3 px-6 rounded-xl font-bold hover:bg-cutePink/80 transition-all">
          全员执行
        </button>
      </div>
    </div>

    <!-- 所有用户列表 -->
    <div class="bg-white rounded-2xl shadow-sm p-6 border border-cuteLightPink">
      <h3 class="font-bold text-gray-800 mb-4 flex items-center gap-2">
        <i class="fas fa-list text-cuteBlue"></i> 所有用户积分/签到记录
      </h3>
      <div class="overflow-x-auto">
        <table class="w-full text-sm text-left">
          <thead class="text-gray-700 bg-cuteLightPink/50 rounded-xl">
            <tr>
              <th class="p-3 rounded-l-xl">QQ号</th>
              <th class="p-3">当前积分</th>
              <th class="p-3">最后签到时间</th>
              <th class="p-3 rounded-r-xl">操作</th>
            </tr>
          </thead>
          <tbody id="userList" class="divide-y divide-cuteLightPink">
            <!-- JS动态渲染 -->
          </tbody>
        </table>
      </div>
      <p id="emptyTip" class="text-center text-gray-500 mt-4 hidden">暂无用户数据～</p>
    </div>
  </div>

  <!-- 弹窗遮罩 -->
  <div id="modalMask" class="fixed inset-0 bg-black/30 flex items-center justify-center hidden z-50">
    <div class="bg-white rounded-2xl p-6 w-full max-w-sm border border-cuteLightPink shadow-lg">
      <div id="modalIcon" class="text-center text-3xl mb-3 text-cutePink">
        <i class="fas fa-check-circle"></i>
      </div>
      <p id="modalText" class="text-center text-gray-700 font-bold">操作成功！</p>
      <button id="closeModal" class="w-full mt-4 bg-cutePink text-white py-2 rounded-xl font-bold hover:bg-cutePink/80 transition-all">
        确定
      </button>
    </div>

    <!-- 签到记录弹窗 -->
    <div id="recordModal" class="fixed inset-0 bg-black/30 flex items-center justify-center hidden z-50">
      <div class="bg-white rounded-2xl p-6 w-full max-w-md border border-cuteLightPink shadow-lg max-h-[80vh] overflow-y-auto">
        <h4 class="text-center font-bold text-cutePink mb-3" id="recordTitle">XXX的签到记录</h4>
        <div id="recordList" class="space-y-2">
          <!-- JS动态渲染 -->
        </div>
        <button id="closeRecordModal" class="w-full mt-4 bg-cutePink text-white py-2 rounded-xl font-bold hover:bg-cutePink/80 transition-all">
          关闭
        </button>
      </div>
    </div>

  <!-- JS引入 -->
  <script src="js/api.js"></script>
  <script src="js/admin.js"></script>
</body>
</html>
